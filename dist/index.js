import{deepmerge as p}from"deepmerge-ts";import i from"./lib/pipe-all.js";import e from"./options/index.js";import n from"./lib/forward-slash-it.js";var c=(r={})=>{for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&r[t]===!0&&(r[t]=e()[t]);const o=p(e(),r);return{name:"astro-compress",hooks:{"astro:config:done":async t=>{o.path=o.path?o.path:t.config.outDir.toString()},"astro:build:done":async()=>{let t=new Set;if(typeof o.path<"u")if(o.path instanceof Array)for(const a of o.path)t.add(n(a));else t.add(n(o.path));for(const a of t)await i(a,o,o.logger)}}}};export{c as default};
